<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    

    <title>
      2016 Multi University Training Contest 4 | 留住了丶时间 
    </title>

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    
      <meta name="author" content="idealism-xxm">
    
    

    <meta name="description" content="官方题解
1001. Another Meaning题目链接
题目大意给定一个串\(s\)，可一个串\(p\)，串\(s\)中的与串\(p\)相等的子串有两个意思，问串\(s\)会有多少种不同的意思？
思路 - KMP&amp;amp;&amp;amp;DP其实第一下就能想到\(KMP\)，但是这种需要多个算法的题接触太少没这种意识，就没往\(DP\)想，认为是排列组合计算。。。看了题解后发现本题就是在\(KMP">
<meta property="og:type" content="article">
<meta property="og:title" content="2016 Multi University Training Contest 4 | 留住了丶时间">
<meta property="og:url" content="http://idealism-xxm.github.io/2016/07/28/2016-Multi-University-Training-Contest 4/index.html">
<meta property="og:site_name" content="留住了丶时间">
<meta property="og:description" content="官方题解
1001. Another Meaning题目链接
题目大意给定一个串\(s\)，可一个串\(p\)，串\(s\)中的与串\(p\)相等的子串有两个意思，问串\(s\)会有多少种不同的意思？
思路 - KMP&amp;amp;&amp;amp;DP其实第一下就能想到\(KMP\)，但是这种需要多个算法的题接触太少没这种意识，就没往\(DP\)想，认为是排列组合计算。。。看了题解后发现本题就是在\(KMP">
<meta property="og:updated_time" content="2016-07-31T15:22:31.216Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="2016 Multi University Training Contest 4 | 留住了丶时间">
<meta name="twitter:description" content="官方题解
1001. Another Meaning题目链接
题目大意给定一个串\(s\)，可一个串\(p\)，串\(s\)中的与串\(p\)相等的子串有两个意思，问串\(s\)会有多少种不同的意思？
思路 - KMP&amp;amp;&amp;amp;DP其实第一下就能想到\(KMP\)，但是这种需要多个算法的题接触太少没这种意识，就没往\(DP\)想，认为是排列组合计算。。。看了题解后发现本题就是在\(KMP">
    
    
    
      <link rel="icon" type="image/x-icon" href="/images/favicon.png">
    
    <link rel="stylesheet" href="/css/uno.css">
    <link rel="stylesheet" href="/css/highlight.css">
    <link rel="stylesheet" href="/css/archive.css">
    <link rel="stylesheet" href="/css/china-social-icon.css">

</head>
<body>

    <span class="mobile btn-mobile-menu">
        <i class="icon icon-list btn-mobile-menu__icon"></i>
        <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
    </span>

    

<header class="panel-cover panel-cover--collapsed">


  <div class="panel-main">

  
    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        
        <a href="/" title="link to homepage for 留住了丶时间"><img src="/images/avatar.jpg" width="80" alt="留住了丶时间 logo" class="panel-cover__logo logo" /></a>
        

        <h1 class="panel-cover__title panel-title"><a href="/" title="link to homepage">留住了丶时间</a></h1>
        <hr class="panel-cover__divider" />

        
        <p class="panel-cover__description">
          旅游即是耻辱！
        </p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">

              
                
                <li class="navigation__item"><a href="/#blog" title="" class="blog-button">首页</a></li>
              
                
                <li class="navigation__item"><a href="/about" title="" class="">关于</a></li>
              
                
                <li class="navigation__item"><a href="/archive" title="" class="">归档</a></li>
              
                
                <li class="navigation__item"><a href="/atom.xml" title="" class="">Rss</a></li>
              
                
                <li class="navigation__item"><a href="/sitemap.xml" title="" class="">Sitemap</a></li>
              

            </ul>
          </nav>

          <!-- ----------------------------
To add a new social icon simply duplicate one of the list items from below
and change the class in the <i> tag to match the desired social network
and then add your link to the <a>. Here is a full list of social network
classes that you can use:

    icon-social-500px
    icon-social-behance
    icon-social-delicious
    icon-social-designer-news
    icon-social-deviant-art
    icon-social-digg
    icon-social-dribbble
    icon-social-facebook
    icon-social-flickr
    icon-social-forrst
    icon-social-foursquare
    icon-social-github
    icon-social-google-plus
    icon-social-hi5
    icon-social-instagram
    icon-social-lastfm
    icon-social-linkedin
    icon-social-medium
    icon-social-myspace
    icon-social-path
    icon-social-pinterest
    icon-social-rdio
    icon-social-reddit
    icon-social-skype
    icon-social-spotify
    icon-social-stack-overflow
    icon-social-steam
    icon-social-stumbleupon
    icon-social-treehouse
    icon-social-tumblr
    icon-social-twitter
    icon-social-vimeo
    icon-social-xbox
    icon-social-yelp
    icon-social-youtube
    icon-social-zerply
    icon-mail

-------------------------------->

<!-- add social info here -->



<nav class="cover-navigation navigation--social">
  <ul class="navigation">

    
      <!-- Github -->
      <li class="navigation__item">
        <a href="https://github.com/idealism-xxm" title="idealism-xxm on GitHub">
          <i class='icon icon-social-github'></i>
          <span class="label">GitHub</span>
        </a>
      </li>
    

    <li class="navigation__item">
        <a href="http://weibo.com/u/2783861260" title="故事_已到終點">
          <i class='icon cs-icon-weibo'></i>
          <span class="label">Weibo</span>
        </a>
    </li>

    <!-- China social icon -->
    <!--
    
      <li class="navigation__item">
        <a href="" title="">
          <i class='icon cs-icon-douban'></i>
          <span class="label">Douban</span>
        </a>
      </li>

      <li class="navigation__item">
        <a href="" title="">
          <i class='icon cs-icon-weibo'></i>
          <span class="label">Weibo</span>
        </a>
      </li>

    -->



  </ul>
</nav>



        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner entry">
            

<article class="post-container post-container--single">

  <header class="post-header">
    
    <h1 class="post-title">2016 Multi University Training Contest 4</h1>

    

    <div class="post-meta">
      <time datetime="2016-07-28" class="post-meta__date date">2016-07-28</time> 

      <span class="post-meta__tags tags">

          
            <font class="categories">
            &#8226; 分类:
            <a class="categories-link" href="/categories/ACM/">ACM</a>, <a class="categories-link" href="/categories/ACM/多校/">多校</a>, <a class="categories-link" href="/categories/ACM/多校/未补完/">未补完</a>, <a class="categories-link" href="/categories/ACM/多校/未补完/2016/">2016</a>
            </font>
          

          
             &#8226; 标签:
            <font class="tags">
              <a class="tags-link" href="/tags/ACM/">ACM</a>, <a class="tags-link" href="/tags/DP/">DP</a>, <a class="tags-link" href="/tags/HDU/">HDU</a>, <a class="tags-link" href="/tags/KMP/">KMP</a>, <a class="tags-link" href="/tags/LIS/">LIS</a>, <a class="tags-link" href="/tags/后缀数组/">后缀数组</a>, <a class="tags-link" href="/tags/多校/">多校</a>, <a class="tags-link" href="/tags/树状数组/">树状数组</a>, <a class="tags-link" href="/tags/贪心/">贪心</a>
            </font>
          

      </span>
    </div>
    
    

  </header>

  <section id="post-content" class="article-content post">
    <p><a href="http://bestcoder.hdu.edu.cn/blog/2016-multi-university-training-contest-4-solutions-by-fzu/" title="2016 Multi-University Training Contest 4 solutions BY FZU" target="_blank" rel="external">官方题解</a></p>
<h1 id="1001-Another-Meaning"><a href="#1001-Another-Meaning" class="headerlink" title="1001. Another Meaning"></a>1001. Another Meaning</h1><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5752" title="HDU-5752 Sqrt Bo" target="_blank" rel="external">题目链接</a></p>
<h2 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h2><p>给定一个串\(s\)，可一个串\(p\)，串\(s\)中的与串\(p\)相等的子串有两个意思，问串\(s\)会有多少种不同的意思？</p>
<h2 id="思路-KMP-amp-amp-DP"><a href="#思路-KMP-amp-amp-DP" class="headerlink" title="思路 - KMP&amp;&amp;DP"></a>思路 - KMP&amp;&amp;DP</h2><p>其实第一下就能想到\(KMP\)，但是这种需要多个算法的题接触太少没这种意识，就没往\(DP\)想，认为是排列组合计算。。。<br>看了题解后发现本题就是在\(KMP\)上\(DP\)，设\(dp[i]\)表示字符串\(s.substr(1,i)\)拥有的意思数，然后会有两种状态转移至此：①末尾的串用第一层含义：\(dp[i]=dp[i-1]\)；②末尾串是\(p\)串时，可以有第二层含义：\(dp[i]+=dp[i-|s|]\)。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN=<span class="number">100005</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MOD=<span class="number">1000000007</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">int</span> nxt[MAXN],dp[MAXN];</span><br><span class="line"><span class="keyword">char</span> a[MAXN],b[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getNext</span><span class="params">(<span class="keyword">char</span> p[])</span> </span>&#123;<span class="comment">//计算模式串p的next数组</span></span><br><span class="line">    <span class="built_in">memset</span>(nxt,<span class="number">0</span>,<span class="keyword">sizeof</span>(nxt));</span><br><span class="line">    nxt[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>,j=<span class="number">0</span>;i&lt;=m;++i) &#123;</span><br><span class="line">        <span class="keyword">while</span>(j!=<span class="number">0</span>&amp;&amp;p[i]!=p[j+<span class="number">1</span>]) &#123;<span class="comment">//如果还在字符串内并且下一个字符不能匹配就往前找</span></span><br><span class="line">            j=nxt[j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(p[i]==p[j+<span class="number">1</span>]) &#123;<span class="comment">//如果下一个字符能够匹配</span></span><br><span class="line">            nxt[i]=++j;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;<span class="comment">//匹配不上则j=0，即下一个字符则从0开始</span></span><br><span class="line">            nxt[i]=<span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">kmp_dp</span><span class="params">(<span class="keyword">char</span> s[],<span class="keyword">char</span> p[])</span> </span>&#123;<span class="comment">//kmp上进行DP</span></span><br><span class="line">    n=<span class="built_in">strlen</span>(s+<span class="number">1</span>);</span><br><span class="line">    m=<span class="built_in">strlen</span>(p+<span class="number">1</span>);</span><br><span class="line">    getNext(p);</span><br><span class="line">    dp[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,j=<span class="number">0</span>;i&lt;=n;++i) &#123;</span><br><span class="line">        <span class="keyword">while</span>(j!=<span class="number">0</span>&amp;&amp;s[i]!=p[j+<span class="number">1</span>]) &#123;<span class="comment">//如果还在字符串内并且下一个字符不能匹配就往前找</span></span><br><span class="line">            j=nxt[j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(s[i]==p[j+<span class="number">1</span>]) &#123;<span class="comment">//如果下一个字符能够匹配上</span></span><br><span class="line">            ++j;</span><br><span class="line">        &#125;</span><br><span class="line">        dp[i]=dp[i<span class="number">-1</span>];</span><br><span class="line">        <span class="keyword">if</span>(j==m) &#123;<span class="comment">//如果j==m，则p串匹配上了s.substr(i-m+1,m)，即可以有第二层意思</span></span><br><span class="line">            dp[i]=(dp[i]+dp[i-m])%MOD;</span><br><span class="line">            j=nxt[j];<span class="comment">//可重复，所以不能从头直接开始下一次，而要从nxt[j]开始</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T,kase=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line">    <span class="keyword">while</span>(kase&lt;T) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s%s"</span>,a+<span class="number">1</span>,b+<span class="number">1</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %d\n"</span>,++kase,kmp_dp(a,b));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="1002-Permutation-Bo"><a href="#1002-Permutation-Bo" class="headerlink" title="1002. Permutation Bo"></a>1002. Permutation Bo</h1><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5753" title="HDU-5753 Permutation Bo" target="_blank" rel="external">题目链接</a></p>
<h2 id="题目大意-1"><a href="#题目大意-1" class="headerlink" title="题目大意"></a>题目大意</h2><p>给定\(n\)个数，第\(i\)个数为\(c_i\)，\(h_1,…,h_n\)是\(1~n\)的一个排列，\(h_0=h<em>n=0\)，设\(f(h)=\sum</em> {i=1} ^{n} c_i * [h<em>i &gt; h</em>{i-1}&amp;&amp;h<em>i&gt;h</em>{i+1}]\)，其中\([condition]=(condition==true?1:0)\)，计算\(f(h)\)的期望。</p>
<h2 id="思路-枚举"><a href="#思路-枚举" class="headerlink" title="思路 - 枚举"></a>思路 - 枚举</h2><p>对于\(c_i\)可以计算\(c_i\)对答案的贡献，枚举第\(i(i!=1&amp;&amp;i!=n)\)位的数为\(j\)，则第\(i-1\)位有\(j-1\)种取法，第\(i+1\)位有\(j-2\)种取法，剩余的\(n-3\)个数全排列，分母为\(n!\)，则\(c_i\)对答案的贡献为：\(\frac {c_i*(j-1)*(j-2)} {n*(n-1)*(n-2) } \)，第\(i\)位和第\(n\)位特殊处理一下就好。<br>复杂度为：\(O(n^2)\)</p>
<p>官方题解直接考虑当前位的前后两个位，这样在两端时，\(c_i\)对答案的贡献为\(\frac {c_i} {2}\)，不在两端时，\(c_i\)对答案的贡献为\(\frac {c_i} {3}\)。<br>复杂度为：\(O(n)\)</p>
<h2 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">﻿<span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n,c;</span><br><span class="line"><span class="keyword">double</span> ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>==<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n)) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;c);</span><br><span class="line">        <span class="keyword">if</span>(n==<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%.6lf\n"</span>,<span class="number">1.0</span>*c);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ans=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>;j&lt;=n;++j) &#123;</span><br><span class="line">            ans+=<span class="number">1.0</span>*c*(j<span class="number">-1</span>)/(n*(n<span class="number">-1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;n;++i) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;c);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">3</span>;j&lt;=n;++j) &#123;</span><br><span class="line">                ans+=<span class="number">1.0</span>*c*(j<span class="number">-1</span>)*(j<span class="number">-2</span>)/(n*(n<span class="number">-1</span>)*(n<span class="number">-2</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;c);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>;j&lt;=n;++j) &#123;</span><br><span class="line">            ans+=<span class="number">1.0</span>*c*(j<span class="number">-1</span>)/(n*(n<span class="number">-1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%.6lf\n"</span>,ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="1006-Substring"><a href="#1006-Substring" class="headerlink" title="1006. Substring"></a>1006. Substring</h1><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5769" title="Substring" target="_blank" rel="external">题目链接</a></p>
<h2 id="题目大意-2"><a href="#题目大意-2" class="headerlink" title="题目大意"></a>题目大意</h2><p>给定一个字符串\(s\)和一个字符\(X\)，求有多少含有字符\(X\)的不同的子串？</p>
<h2 id="思路-后缀数组"><a href="#思路-后缀数组" class="headerlink" title="思路 - 后缀数组"></a>思路 - 后缀数组</h2><p>比赛时还没学过后缀数组，所以根本看不出来。<br>看了后缀数组后，明白所有的子串都是后缀的前缀，并且利用后缀数组可以轻松求出不同的子串数，但本题要求子串含有字符\(X\)，看似变麻烦了许多，其实仔细分析一下，只不过需要在统计时做微小的改变即可。</p>
<p>普通统计不同子串时，每个后缀都是从长度为\(1\)的前缀开始统计；本题需要统计含有字符\(X\)的子串，假设距离\(s[i]\)下一个最近的字符\(X\)是\(s[j]\)，则\(suffix(i)\)从长度为\(j-i+1\)的前缀开始统计。同时还要消除重复的子串，则\(j\)不在最长公共前缀中，则减去\(j\)，否则减去\(sa[i]+height[i]\)。</p>
<h2 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line">﻿<span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN=<span class="number">100005</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span><br><span class="line">*suffix array</span><br><span class="line">*倍增算法  O(n*logn)</span><br><span class="line">*build_SA( , n, );</span><br><span class="line">*getHeight( ,n);</span><br><span class="line">*例如：</span><br><span class="line">*n   = 8;</span><br><span class="line">*num[]   = &#123; 1, 1, 2, 1, 1, 1, 1, 2, $ &#125;;注意num最后一位为0，其他大于0</span><br><span class="line">*rank[]  = &#123; 4, 6, 8, 1, 2, 3, 5, 7, 0 &#125;;rank[0~n-1]为有效值，rank[n]必定为0无效值</span><br><span class="line">*sa[]    = &#123; 8, 3, 4, 5, 0, 6, 1, 7, 2 &#125;;sa[1~n]为有效值，sa[0]必定为n是无效值</span><br><span class="line">*height[]= &#123; 0, 0, 3, 2, 3, 1, 2, 0, 1 &#125;;height[2~n]为有效值</span><br><span class="line">*</span><br><span class="line">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> c[MAXN];<span class="comment">//求SA数组时计数排序的辅助数组</span></span><br><span class="line"><span class="keyword">int</span> sa[MAXN],rnk[MAXN],height[MAXN];<span class="comment">//sa[i]表示排名为i的是以第sa[i]个字符起始的后缀串；rnk[i]表示以第i个字符起始的后缀串的排名；height[i]表示suffix(i)和suffix(i-1)的最长公共前缀的长度</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build_SA</span><span class="params">(<span class="keyword">int</span> s[],<span class="keyword">int</span> len,<span class="keyword">int</span> mx)</span> </span>&#123;<span class="comment">//原字符串为s[0..(len-1)] 【为了方便后面的下标，需要提前将字符串复制到int数组中】，最大值小于mx</span></span><br><span class="line">    <span class="keyword">int</span> i,j,p=<span class="number">0</span>;<span class="comment">//i,j为循环变量；p为下次最大值</span></span><br><span class="line">    <span class="keyword">int</span> *x=rnk,*y=height;<span class="comment">//x,y分别指向辅助数组rnk,height【此处由于rnk个height数组都没用，所以暂时用来代替辅助数组】；方便交换数组t1,t2；x数组表示每次排序后的真实rank（可能会相等），y数组表示按第二关键字排序后的rank</span></span><br><span class="line"></span><br><span class="line">    s[len++]=<span class="number">0</span>;<span class="comment">//为了方便计算，在原字符串末尾加一个0</span></span><br><span class="line">    <span class="comment">//第一次用计数排序给每个长度为1的字符串排序</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;mx;++i) &#123;<span class="comment">//c数组是计数排序的辅助数组</span></span><br><span class="line">        c[i]=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len;++i) &#123;<span class="comment">//统计每个字符出现的次数</span></span><br><span class="line">        ++c[x[i]=s[i]];<span class="comment">//x数组相当于每个字符的rank值，但rank值只是用来判断rank值是否相等的，所以无需求出真实的rank值，以其字符代替，即相同字符的rank值相等</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;mx;++i) &#123;<span class="comment">//进行完本次循环后，c[i]就是排序完成后，字符s[i]最后一个排名的下一个排名</span></span><br><span class="line">        c[i]+=c[i<span class="number">-1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=len<span class="number">-1</span>;i&gt;=<span class="number">0</span>;--i) &#123;<span class="comment">//从后统计参与排名的字符，保证相同字符排在前面的排名高</span></span><br><span class="line">        sa[--c[x[i]]]=i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(j=<span class="number">1</span>;p&lt;len;j&lt;&lt;=<span class="number">1</span>) &#123;<span class="comment">//j为当前字符串的长度；当排名达到len时，则所有后缀串的排名均不相同，此时可以停止倍增</span></span><br><span class="line">        <span class="comment">//利用上一次求得的SA，直接对第二关键字排序</span></span><br><span class="line">        <span class="keyword">for</span>(p=<span class="number">0</span>,i=len-j;i&lt;len;++i) &#123;<span class="comment">//起始点在[len-j,len)中的后缀字符串长度均小于j，即无第二关键字，所以其第二关键字最小</span></span><br><span class="line">            y[p++]=i;<span class="comment">//此时i表示起始点</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len;++i) &#123;<span class="comment">//起始点在[0,j)中的长度为j的字符串，前面没有长度大于等于j的字符串，即其不会作为第二关键字，所以不算入排序</span></span><br><span class="line">            <span class="keyword">if</span>(sa[i]&gt;=j) &#123;<span class="comment">//此时i表示排名</span></span><br><span class="line">                y[p++]=sa[i]-j;<span class="comment">//起点在[j,len)中的长度为j（后j-1个字符串小于j）的字符串  作为起点在[0,len-j)中的长度为2*j（后j个字符串小于2*j）的第二关键字，并对其排序</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="comment">//循环结束后y[z]表示排名为z长度为2*j（后j个字符串小于2*j）的字符串的起始点</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//用计数排序对第一关键字进行排序</span></span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;mx;++i) &#123;</span><br><span class="line">            c[i]=<span class="number">0</span>;<span class="comment">//计数排序辅助数组清零</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len;++i) &#123;<span class="comment">//统计每个rank值出现的次数</span></span><br><span class="line">            ++c[x[y[i]]];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;mx;++i) &#123;</span><br><span class="line">            c[i]+=c[i<span class="number">-1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(i=len<span class="number">-1</span>;i&gt;=<span class="number">0</span>;--i) &#123;<span class="comment">//从后统计参与排名的字符，保证相同字符串排在前面的排名高</span></span><br><span class="line">            sa[--c[x[y[i]]]]=y[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        swap(x,y);<span class="comment">//交换指针以实现整个数组的交换</span></span><br><span class="line">        p=<span class="number">1</span>;</span><br><span class="line">        x[sa[<span class="number">0</span>]]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;len;++i) &#123;<span class="comment">//对x数组进行修正（前面没看到，导致怎么看程序都无法理解与图示的倍增过程那个rank值不一样）</span></span><br><span class="line">            x[sa[i]]=(y[sa[i<span class="number">-1</span>]]==y[sa[i]] &amp;&amp; y[sa[i<span class="number">-1</span>]+j]==y[sa[i]+j]?p<span class="number">-1</span>:p++);<span class="comment">//rank相邻的两个字符串的第一关键字和第二关键字都一样，则其rank一样，否则rank+1</span></span><br><span class="line">        &#125;</span><br><span class="line">        mx=p;<span class="comment">//更新下次计数排序的最大值</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getHeight</span><span class="params">(<span class="keyword">int</span> s[],<span class="keyword">int</span> len)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i,j,k=<span class="number">0</span>;<span class="comment">//k表示最长公共前缀的长度</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=len;++i) &#123;<span class="comment">//求rnk数组</span></span><br><span class="line">        rnk[sa[i]]=i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;len;++i) &#123;<span class="comment">//计算排名为i的后缀的height</span></span><br><span class="line">        <span class="keyword">if</span>(k!=<span class="number">0</span>) &#123;<span class="comment">//如果suffix(i-1)与其前一名的后缀串的最长公共前缀长度不为0</span></span><br><span class="line">            --k;</span><br><span class="line">        &#125;</span><br><span class="line">        j=sa[rnk[i]<span class="number">-1</span>];<span class="comment">//j表示suffix(i)前一名的后缀串的起始点</span></span><br><span class="line">        <span class="keyword">while</span>(s[i+k]==s[j+k]) &#123;<span class="comment">//寻找suffix(i)和suffix(j)的最长公共前缀长度</span></span><br><span class="line">            ++k;</span><br><span class="line">        &#125;</span><br><span class="line">        height[rnk[i]]=k;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> tmp[MAXN],len,nxt[MAXN],pos;</span><br><span class="line"><span class="keyword">char</span> s[MAXN],cmd[<span class="number">3</span>];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T,kase=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line">    <span class="keyword">while</span>(T--) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s%s"</span>,cmd,s);</span><br><span class="line">        <span class="keyword">for</span>(len=<span class="number">0</span>;s[len]!=<span class="string">'\0'</span>;++len) &#123;</span><br><span class="line">            tmp[len]=s[len];</span><br><span class="line">        &#125;</span><br><span class="line">        build_SA(tmp,len,<span class="number">128</span>);</span><br><span class="line">        getHeight(tmp,len);</span><br><span class="line"></span><br><span class="line">        pos=len;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=len<span class="number">-1</span>;i&gt;=<span class="number">0</span>;--i) &#123;</span><br><span class="line">            <span class="keyword">if</span>(s[i]==cmd[<span class="number">0</span>]) &#123;</span><br><span class="line">                pos=i;</span><br><span class="line">            &#125;</span><br><span class="line">            nxt[i]=pos;</span><br><span class="line">        &#125;</span><br><span class="line">        ans=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=len;++i) &#123;</span><br><span class="line">            ans+=len-max(nxt[sa[i]],sa[i]+height[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %I64d\n"</span>,++kase,ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="1010-The-All-purpose-Zero"><a href="#1010-The-All-purpose-Zero" class="headerlink" title="1010. The All-purpose Zero"></a>1010. The All-purpose Zero</h1><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5773" title="HDU-5773 The All-purpose Zero" target="_blank" rel="external">题目链接</a></p>
<h2 id="题目大意-3"><a href="#题目大意-3" class="headerlink" title="题目大意"></a>题目大意</h2><p>给定一个长度为\(n\)的序列，序列中的\(0\)可以变成任何数，求最长上升子序列？</p>
<h2 id="思路-LIS-amp-amp-贪心"><a href="#思路-LIS-amp-amp-贪心" class="headerlink" title="思路 - LIS&amp;&amp;贪心"></a>思路 - LIS&amp;&amp;贪心</h2><p>套了一个\(O(nlogn)\)的模版<br>当\(a[i]==0\)时，特殊处理：<br>①首先给\(LIS\)长度\(siz\)加\(1\)，此时辅助数组的\(c[siz]=c[siz]+1\)；<br>②给辅助数组\(c[i]=c[i-1]+1\)，即将每一个长度下的最后一个数减至最小。<br>其余情况套模版即可。<br>这样就变成了\(O(n^2)\)，但只跑了\(124ms\)，应该是数据太水，水过了。</p>
<p>题解采用了贪心的思想，即用上所有的\(0\)，同时避免不是严格单调递增，对每个数字减去其前面的\(0\)的个数，然后做\(LIS\)，最终的结果再加上\(0\)的个数就是答案</p>
<h2 id="代码-3"><a href="#代码-3" class="headerlink" title="代码"></a>代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n,num,mn[<span class="number">100005</span>],len,cnt,indx;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T,kase=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line">    <span class="keyword">while</span>(kase&lt;T) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;num);</span><br><span class="line">        mn[<span class="number">1</span>]=(num==<span class="number">0</span>?<span class="number">-0x3f3f3f3f</span>:num);<span class="comment">//如果第一个数就是0，不将其看作0，而变成一个最小的数</span></span><br><span class="line">        len=<span class="number">1</span>;</span><br><span class="line">        cnt=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;++i) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;num);</span><br><span class="line">            <span class="keyword">if</span>(num==<span class="number">0</span>) &#123;</span><br><span class="line">                ++cnt;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                num-=cnt;</span><br><span class="line">                <span class="keyword">if</span>(num&gt;mn[len]) &#123;</span><br><span class="line">                    mn[++len]=num;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    indx=lower_bound(mn+<span class="number">1</span>,mn+len+<span class="number">1</span>,num)-mn;<span class="comment">//找到大于等于num的第一个数（【注意】lower_bound才不会越界）</span></span><br><span class="line">                    mn[indx]=num;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d: %d\n"</span>,++kase,len+cnt);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="1011-Where-Amazing-Happens"><a href="#1011-Where-Amazing-Happens" class="headerlink" title="1011. Where Amazing Happens"></a>1011. Where Amazing Happens</h1><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5774" title="HDU-5774 Where Amazing Happens" target="_blank" rel="external">题目链接</a></p>
<h2 id="题目大意-4"><a href="#题目大意-4" class="headerlink" title="题目大意"></a>题目大意</h2><p>给定一些字符串，询问某个字符串出现了多少次？</p>
<h2 id="思路-模拟"><a href="#思路-模拟" class="headerlink" title="思路 - 模拟"></a>思路 - 模拟</h2><p>将所有的字符串放入文本，本地编写程序统计并输出生存代码即可。</p>
<h2 id="代码-4"><a href="#代码-4" class="headerlink" title="代码"></a>代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n,cnt;</span><br><span class="line"><span class="built_in">string</span> s;</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="built_in">string</span>,<span class="keyword">int</span>&gt; mp;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    mp[<span class="string">"Baltimore Bullets"</span>]=<span class="number">1</span>;</span><br><span class="line">    mp[<span class="string">"Boston Celtics"</span>]=<span class="number">17</span>;</span><br><span class="line">    mp[<span class="string">"Chicago Bulls"</span>]=<span class="number">6</span>;</span><br><span class="line">    mp[<span class="string">"Cleveland Cavaliers"</span>]=<span class="number">1</span>;</span><br><span class="line">    mp[<span class="string">"Dallas Mavericks"</span>]=<span class="number">1</span>;</span><br><span class="line">    mp[<span class="string">"Detroit Pistons"</span>]=<span class="number">3</span>;</span><br><span class="line">    mp[<span class="string">"Golden State Warriors"</span>]=<span class="number">2</span>;</span><br><span class="line">    mp[<span class="string">"Houston Rockets"</span>]=<span class="number">2</span>;</span><br><span class="line">    mp[<span class="string">"L.A. Lakers"</span>]=<span class="number">11</span>;</span><br><span class="line">    mp[<span class="string">"Miami Heat"</span>]=<span class="number">3</span>;</span><br><span class="line">    mp[<span class="string">"Milwaukee Bucks"</span>]=<span class="number">1</span>;</span><br><span class="line">    mp[<span class="string">"Minneapolis Lakers"</span>]=<span class="number">5</span>;</span><br><span class="line">    mp[<span class="string">"New York Knicks"</span>]=<span class="number">2</span>;</span><br><span class="line">    mp[<span class="string">"Philadelphia 76ers"</span>]=<span class="number">2</span>;</span><br><span class="line">    mp[<span class="string">"Philadelphia Warriors"</span>]=<span class="number">2</span>;</span><br><span class="line">    mp[<span class="string">"Portland Trail Blazers"</span>]=<span class="number">1</span>;</span><br><span class="line">    mp[<span class="string">"Rochester Royals"</span>]=<span class="number">1</span>;</span><br><span class="line">    mp[<span class="string">"San Antonio Spurs"</span>]=<span class="number">5</span>;</span><br><span class="line">    mp[<span class="string">"Seattle Sonics"</span>]=<span class="number">1</span>;</span><br><span class="line">    mp[<span class="string">"St. Louis Hawks"</span>]=<span class="number">1</span>;</span><br><span class="line">    mp[<span class="string">"Syracuse Nats"</span>]=<span class="number">1</span>;</span><br><span class="line">    mp[<span class="string">"Washington Bullets"</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> T,kase=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line">    <span class="built_in">cin</span>.get();</span><br><span class="line">    <span class="keyword">while</span>(kase&lt;T) &#123;</span><br><span class="line">        getline(<span class="built_in">cin</span>,s);</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"Case #"</span>&lt;&lt;++kase&lt;&lt;<span class="string">": "</span>&lt;&lt;mp[s]&lt;&lt;<span class="string">"\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="1012-Bubble-Sort"><a href="#1012-Bubble-Sort" class="headerlink" title="1012. Bubble Sort"></a>1012. Bubble Sort</h1><p><a href="http://acm.hdu.edu.cn/showproblem.php?pid=5775" title="HDU-5775 Bubble Sort" target="_blank" rel="external">题目链接</a></p>
<h2 id="题目大意-5"><a href="#题目大意-5" class="headerlink" title="题目大意"></a>题目大意</h2><p>给定一个\(1~n\)的排列，求冒泡排序的整个过程中，每个数字最右边的位置减去最左边的位置是多少？</p>
<h2 id="思路-树状数组"><a href="#思路-树状数组" class="headerlink" title="思路 - 树状数组"></a>思路 - 树状数组</h2><p>手动跑一下冒泡排序就能发现，每个数字往后移动\(x\)次，\(x\)是在这个数的后面且比他小的数，所以能到达的最右边就是原位置加上往后移动的次数，最左边就是初始位置和最终位置的最小值。</p>
<h2 id="代码-5"><a href="#代码-5" class="headerlink" title="代码"></a>代码</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) (x&amp;(-x))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n,num[<span class="number">100005</span>],cnt[<span class="number">100005</span>];</span><br><span class="line"><span class="keyword">int</span> sma[<span class="number">100005</span>],pos[<span class="number">100005</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(x&lt;=n) &#123;</span><br><span class="line">        ++cnt[x];</span><br><span class="line">        x+=lowbit(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x&gt;<span class="number">0</span>) &#123;</span><br><span class="line">        res+=cnt[x];</span><br><span class="line">        x-=lowbit(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T,kase=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line">    <span class="keyword">while</span>(kase&lt;T) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,num+i);</span><br><span class="line">            pos[num[i]]=i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">memset</span>(cnt,<span class="number">0</span>,<span class="keyword">sizeof</span>(cnt));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=n;i&gt;=<span class="number">1</span>;--i) &#123;</span><br><span class="line">            sma[num[i]]=query(num[i]);</span><br><span class="line">            update(num[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Case #%d:"</span>,++kase);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">" %d"</span>,pos[i]+sma[i]-min(i,pos[i]));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  </section>

  
  

<section class="post-comments">

    <div class="ds-thread" data-thread-key="2016/07/28/2016-Multi-University-Training-Contest 4/"></div>

    <script type="text/javascript">
      var duoshuoQuery = {short_name:"idealism-xxm"};
      (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
        || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
    </script> 

</section>


</article>


            <footer class="footer">

    <span class="footer__copyright">&copy; 2014-2015. | 由<a href="https://hexo.io/">Hexo</a>强力驱动 | 主题<a href="https://github.com/someus/huno">Huno</a></span>
    
</footer>
        </div>
    </div>

    <!-- js files -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/main.js"></script>
    <script src="/js/scale.fix.js"></script>
    

    

    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript"> 
        $(document).ready(function(){
            MathJax.Hub.Config({ 
                tex2jax: {inlineMath: [['[latex]','[/latex]'], ['\\(','\\)']]} 
            });
        });
    </script>


    

    <script src="/js/awesome-toc.min.js"></script>
    <script>
        $(document).ready(function(){
            $.awesome_toc({
                overlay: true,
                contentId: "post-content",
            });
        });
    </script>


    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-79149014-1', 'auto');
  ga('send', 'pageview');

</script>
    

    <script src="/js/jquery.githubRepoWidget.min.js"></script>


    <!--kill ie6 -->
<!--[if IE 6]>
  <script src="//letskillie6.googlecode.com/svn/trunk/2/zh_CN.js"></script>
<![endif]-->

</body>
</html>
